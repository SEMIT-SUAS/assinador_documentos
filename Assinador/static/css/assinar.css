:root{
  --brand:#0d6efd;
  --border:rgba(0,0,0,.12);
  --surface:#fff;
  --muted:#6c757d;
  --shadow:0 1px 2px rgba(0,0,0,.06), 0 6px 24px rgba(0,0,0,.06);
}

/* Garante 1:1 entre tamanho CSS e tamanho interno do canvas */
#stage canvas {
  position: relative;
  z-index: 1;
  width: auto !important;
  height: auto !important;
  max-width: none !important;
  max-height: none !important;
}

#stage { display: inline-block; position: relative;}
#canvasContainer { overflow: auto !important; }

/* Evita qualquer transformação que distorça */
#canvasContainer, #stage, #pdfCanvas {
  transform: none !important;
  rotate: 0deg !important;
  scale: 1 !important;
  transform-origin: top left !important;
}

/* Header */
.app-header{display:flex;align-items:center;justify-content:center;width:100%;margin-top:1.5rem;margin-bottom:.5rem}
.app-title{display:flex;align-items:center;gap:.5rem;font-weight:700;color:var(--brand);font-size:clamp(1.2rem,2.2vw,1.6rem)}
.text-end,.text-end-1{display:flex;width:100%;justify-content:space-between;align-items:center}
.text-end-1{justify-content:flex-end}
.usuario{margin-right:.75rem;font-size:clamp(.95rem,1.6vw,1rem)}
#canvasContainer{position: relative;background: #f8f9fa;border: 1px dashed var(--border);border-radius: .15rem;padding: 8px;max-width: 1100px;      margin: 0 auto;max-height: 82vh;overflow: auto;}

/*centralizar botoes*/
#centralizar-button{display: flex;flex-wrap: wrap;width: 100%;justify-content: space-between;}

/* ====== CANVASES ====== */
#canvasContainer canvas{display: none;margin: 0 auto;background: #fff;box-shadow: 0 1px 2px rgba(0,0,0,.03);}

#canvasContainer canvas.active{display: block;}
/* Quando preenchido, mantenha limites e rolagem (não solte overflow) */
#canvasContainer.filled{background: transparent;border: none;padding: 0 !important;max-width: 1100px;     margin: 0 auto;max-height: 82vh !important;overflow: auto !important;}

.assinar-doc{display: flex;flex-direction: row;gap: 7px; justify-content: space-between;}
.assinar-doc-2{display: flex;flex-direction: row;gap: 7px; justify-content: space-between;}  
.resultado-assinado{display: flex;flex-direction: row;gap: 7px; justify-content: space-between;}
.resultado-assinado-2{display: flex;flex-direction: row;gap: 7px; justify-content: space-between;}


#canvasContainer.filled #stage{margin: 0 auto;}

/* ===== carimbo visual ===== */
.retangulo{
  position:absolute;
  padding:6px 10px;
  display:block;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:3px;
  opacity: 1;
  visibility: visible;
  box-sizing: border-box;     /* padding conta dentro do width/height */
  overflow: hidden; 
  z-index: 9999;  
  background:#ffffff;
  border:1px dashed #aaaaaab9;          /* borda tracejada cinza */
  box-shadow: 0px 2px 18px 0px rgba(0, 119, 255, 0.801);    /* “halo” laranja externo */
  user-select:none;
  -webkit-user-drag:none;
  cursor:grab;
  box-sizing: border-box;
}

.retangulo:active{ cursor:grabbing; }

/* reforço visual ao arrastar (ativado via JS adicionando .dragging) */
.retangulo.dragging{
  box-shadow:
    0px 2px 18px 0px rgba(0,0,0,0.3);
  border-color:#444444;
}

/* título e texto */
.retangulo .stamp-title{
  font-weight:700;
  margin-bottom: 2px;
  font-size:13px;
  text-align:center;
  color:#222;
  line-height:1.2;
}


.retangulo .stamp-hint{
  font-size:10px;
  color:#504d4d;
  text-align:center;
  line-height:1.2;
}

/* esconder alças de resize (não são mais usadas) */
.retangulo .handle{ display:none !important; }

/* opcional: alto contraste quando o carimbo ganha foco por teclado */
.retangulo:focus-visible{
  outline:2px solid rgba(0, 89, 255, 0.5);
  outline-offset:2px;
}



/* Resultado */
.viewer{border:1px solid var(--border);border-radius:10px;background:#fff;padding:8px;margin-top:16px}
.pdf-frame{width:100%;height:clamp(56vh,70vh,82vh);border:none;border-radius:8px}
.img-preview{max-width:100%;height:auto;border-radius:8px;display:block;margin:0 auto}

/* Barra de centralização */
.center-bar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem}
.center-bar .btn{display:flex;align-items:center;gap:.5rem; justify-content: space-between;}
.flex-wrap{display:flex;flex-wrap: wrap; font-size:.95rem;width: 100%;max-width: 500px; justify-content: space-between; }


/* --- DESKTOP: limite real do editor (≥992px) --- */
@media (min-width: 992px){
  #canvasContainer canvas{display: none;margin: 0 auto;background: #fff;box-shadow: 0 1px 2px rgba(0,0,0,.03);visibility: visible; /* não esconda por visibility */}
  #pdfControls{display:flex;justify-content: center;flex-direction: column;align-items: center;}
  #canvasContainer canvas.active{display: block;}
  #stage canvas{display: block;width: 100%;height: auto;}}



@media (max-width:991px){
  #canvasContainer{min-height: clamp(220px, 55vh, 65vh); padding:6px}
  .center-bar .btn{display:flex;flex-wrap: wrap; font-size:.95rem;padding:.45rem .65rem;width: 100%;max-width: 500px; justify-content: center;}
  .flex-wrap{display:flex;flex-wrap: wrap; font-size:.95rem;width: 100%;max-width: 500px; justify-content: space-between; }
  #pdfControls{display:flex;justify-content: center;flex-direction: column;align-items: center;}
  #canvasContainer.filled{padding:0 !important;min-height:0 !important;max-height:none !important;}}


@media (max-width:575.98px){
#canvasContainer{min-height: clamp(220px, 55vh, 65vh); padding:6px}
.center-bar .btn{display:flex;flex-wrap: wrap; font-size:.95rem;padding:.45rem .65rem;width: 100%;max-width: 500px; justify-content: center;}
.flex-wrap{display:flex;flex-wrap: wrap; font-size:.95rem;width: 100%;max-width: 500px; justify-content: space-between; }
#pdfControls{display:flex;justify-content: center;flex-direction: column;align-items: center;}
#canvasContainer.filled{padding:0 !important;min-height:0 !important;max-height:none !important;}}


@media (max-width:511px){
  #canvasContainer{min-height: clamp(220px, 55vh, 65vh); padding:6px}
  #canvasContainer.filled{padding:0 !important;min-height:0 !important;max-height:none !important;}
  .center-bar .btn{display:flex;flex-wrap: wrap; font-size:.95rem;padding:.45rem .65rem;width: 100%;max-width: 500px; justify-content: center;}
  .flex-wrap{display:flex;flex-wrap: wrap; font-size:.95rem;width: 100%;max-width: 500px; justify-content: space-between; }
  .app-header{display:block;align-items:center;justify-content:center;margin-top:1.5rem;margin-bottom:.5rem;}
  .app-title{display:flex;align-items:center;gap:.5rem;font-weight:700;color:var(--brand);font-size:clamp(1.2rem,2.2vw,1.6rem)}
  .text-end,.text-end-1{display:flex;justify-content:space-between;align-items:center}
  .text-end-1{justify-content:space-between}
  .usuario{margin-right:.75rem;font-size:clamp(.95rem,1.6vw,1rem)}
  #pdfControls{display:flex;justify-content: center;flex-direction: column;align-items: center;}
  #centralizar-button{display: flex;flex-direction: column;gap: 7px;}
  .assinar-doc{display: flex;flex-direction: column;gap: 7px;}
  .assinar-doc-2{display: flex;flex-direction: row;}
  .resultado-assinado{display: flex;flex-direction: column;gap: 7px;}
  .resultado-assinado-2{display: flex;flex-direction: row;}
  }


